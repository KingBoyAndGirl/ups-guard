# Changelog

UPS Guard版本更新日志

---

## [1.0.0] - 2026-02-15

🎉 **首个正式版本发布** - 生产就绪，安全加固，性能优化

**开发者**： 王.W
**测试环境**：Windows 11 + 懒猫微服 + APC Back-UPS BK650M2-CH + NUT 2.8.3

> 📖 详细功能介绍和截图请参阅：[RELEASE_NOTES_v1.0.0.md](RELEASE_NOTES_v1.0.0.md)

---

### 🔌 实时监控系统

- ✨ **WebSocket实时推送**：UPS状态变化实时推送，无需刷新页面
- ✨ **状态监控**：UPS状态、电池信息、电力指标、电压质量全面监控
- ✨ **数据可视化**：ECharts实时曲线图，24小时趋势展示
- ✨ **事件驱动监控**：基于NUT LISTEN协议，响应时间<100ms
- ✨ **混合监控模式**：事件驱动+60秒备份轮询，通信频率降低88%
- ✨ **监控统计**：今日通信次数、平均响应时间、历史趋势分析

---

### 🔋 智能电源管理

- ✨ **自动关机策略**：三段式倒计时（初始等待→电量检查→最终等待）
- ✨ **智能取消**：市电恢复自动取消关机
- ✨ **关机流程**：支持预关机任务（gRPC）、Wake-on-LAN唤醒
- ✨ **关机时间线**：可视化时间线，实时显示关机进度

---

### 🔧 UPS参数配置

- ✨ **Dashboard内联编辑**：点击即可修改电压阈值、输入灵敏度
- ✨ **Settings高级配置**：统一的参数配置面板，支持所有可写变量
- ✨ **安全机制**：参数白名单、范围验证、二次确认、事件记录
- ✨ **智能排序**：同时设置多个电压阈值时自动优化顺序避免冲突

---

### 📊 数据持久化与历史

- ✨ **SQLite WAL模式**：提高并发性能，减少fsync开销
- ✨ **事件日志**：支持8种事件类型，详细的元数据记录
- ✨ **事件来源过滤**：前端/后端/NUT/UPS四个来源，彩色标签区分
- ✨ **指标采样**：30/60/300秒可配置，最长保留90天
- ✨ **监控统计持久化**：每日统计自动保存，支持查询历史趋势

---

### 🔔 通知推送系统

- ✨ **6种推送渠道**：Server酱、PushPlus、钉钉、Telegram、邮件、Webhook
- ✨ **通知规则**：UPS状态变化、关机事件、NUT连接、电量/温度告警
- ✨ **消息模板**：中英文双语，丰富的事件信息和建议操作
- ✨ **插件系统**：支持Python自定义推送插件，动态加载

---

### 🎨 用户界面

- ✨ **Dashboard仪表盘**：9个功能卡片，实时数据图表
- ✨ **Settings设置**：关机策略、推送通知、监控模式、高级参数、数据管理
- ✨ **Events事件日志**：过滤器、分页、来源标签
- ✨ **History历史记录**：长期趋势图、监控统计卡片、测试报告导出
- ✨ **深色模式**：亮色/暗色/跟随系统，自动适配所有组件
- ✨ **响应式设计**：完整支持桌面/平板/手机，移动端优化

---

### 🔒 安全与性能

- ✨ **API Token认证**：Bearer Token保护所有API端点
- ✨ **敏感数据加密**：Fernet对称加密，API返回自动脱敏
- ✨ **CORS限制**：默认仅允许同域和配置的子域
- ✨ **输入验证**：参数白名单、范围检查、类型验证
- ✨ **性能优化**：SQLite WAL、数据降采样、WebSocket批量推送、懒加载
- ✨ **错误恢复**：gRPC/NUT自动重连，事务保护，详细日志

---

### 🐳 部署与国际化

- ✨ **Docker三服务架构**：nut + backend + frontend，一键部署
- ✨ **多平台支持**：懒猫微服、群晖、威联通、Windows/Linux/Mac
- ✨ **健康检查**：/health端点，Docker健康检查配置
- ✨ **中英文双语**：UI界面、通知消息、文档完整翻译

---

### 📈 性能指标

- ⚡ **API响应**：<50ms (P95)
- ⚡ **WebSocket延迟**：<100ms
- ⚡ **通信优化**：88%减少（17,280→2,000次/天）
- ⚡ **电池续航**：延长10-15分钟
- ⚡ **资源占用**：内存~150MB，空闲CPU<1%

---

### 🔧 技术栈

**后端**：Python 3.11+ | FastAPI | aiosqlite | PyNUT | Cryptography | gRPC  
**前端**：Vue 3.5+ | TypeScript | ECharts | Vite | Pinia  
**基础设施**：Docker | Nginx | NUT 2.8.3 | SQLite 3

---



---

### 🙏 致谢

感谢以下开源项目：NUT (Network UPS Tools) | FastAPI | Vue.js | ECharts | Docker

---

**Legend**
- 🎉 Major release
- ✨ New feature
- 🔒 Security
- 🐛 Bug fix
- 📈 Performance
- 🛡️ Robustness
- 🌍 i18n
- 🔧 Configuration

# Changelog

All notable changes to UPS Guard (UPS Guard) will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## [Unreleased]

### Added - æ–°å¢åŠŸèƒ½

#### UPS å‚æ•°é…ç½® ğŸ”§
- **å¯å†™å‚æ•°ç®¡ç†**: æ”¯æŒç›´æ¥ä¿®æ”¹ UPS ç¡¬ä»¶å‚æ•°
  - ç”µå‹ä¿æŠ¤é˜ˆå€¼ï¼šé«˜å‹åˆ‡æ¢ç‚¹ï¼ˆ220-300Vï¼‰ã€ä½å‹åˆ‡æ¢ç‚¹ï¼ˆ100-200Vï¼‰
  - è¾“å…¥çµæ•åº¦ï¼šä½/ä¸­/é«˜ä¸‰ä¸ªç­‰çº§
  - å…³æœºå»¶è¿Ÿï¼š0-600 ç§’å¯é…ç½®
  - åŸºäº NUT SET VAR å’Œ LIST RW åè®®å®ç°
  
- **Dashboard å†…è”ç¼–è¾‘**: åœ¨ä»ªè¡¨ç›˜å¡ç‰‡ä¸­å¿«é€Ÿä¿®æ”¹å‚æ•°
  - ç”µå‹è´¨é‡å¡ç‰‡ï¼šç‚¹å‡»å®‰å…¨åŒºé—´å€¼å¯ç¼–è¾‘
  - ä¿æŠ¤çŠ¶æ€æ€»è§ˆå¡ç‰‡ï¼šç‚¹å‡»çµæ•åº¦å¯åˆ‡æ¢
  - å…³æœºæ—¶é—´çº¿å¡ç‰‡ï¼šæ˜¾ç¤ºå¹¶å¯ç¼–è¾‘å…³æœºå»¶è¿Ÿ
  
- **Settings é«˜çº§é…ç½®é¢æ¿**: ç»Ÿä¸€çš„å‚æ•°é…ç½®ç•Œé¢
  - å››ä¸ªé…ç½®åŒºåŸŸï¼šç”µå‹ä¿æŠ¤ã€çµæ•åº¦ã€å…³æœºå»¶è¿Ÿã€æ‰€æœ‰å¯å†™å˜é‡åˆ—è¡¨
  - å½“å‰å€¼ä¸æ–°å€¼å¯¹æ¯”æ˜¾ç¤º
  - æ‰€æœ‰ä¿®æ”¹å‰éœ€äºŒæ¬¡ç¡®è®¤
  
- **å®‰å…¨æœºåˆ¶**:
  - ç™½åå•éªŒè¯ï¼šåªå…è®¸ä¿®æ”¹å®‰å…¨å‚æ•°
  - èŒƒå›´éªŒè¯ï¼šæ•°å€¼å¿…é¡»åœ¨åˆç†åŒºé—´å†…
  - æ™ºèƒ½æ’åºï¼šåŒæ—¶è®¾ç½®å¤šä¸ªç”µå‹é˜ˆå€¼æ—¶è‡ªåŠ¨ä¼˜åŒ–é¡ºåºé¿å…å†²çª
  - äº‹ä»¶è®°å½•ï¼šæ‰€æœ‰ä¿®æ”¹è®°å½•åˆ°äº‹ä»¶å†å²ï¼ˆç±»å‹ï¼šå‚æ•°ä¿®æ”¹ ğŸ”§ï¼‰
  
- **API ç«¯ç‚¹**:
  - `GET /api/ups/writable-vars`: åˆ—å‡ºæ‰€æœ‰å¯å†™å˜é‡
  - `POST /api/ups/set-var`: è®¾ç½®å‚æ•°ï¼ˆå¸¦ç™½åå•å’ŒéªŒè¯ï¼‰

## [1.0.0] - 2026-02-15

### ğŸ‰ æ­£å¼ç‰ˆå‘å¸ƒ

è¿™æ˜¯ UPS Guard çš„ç¬¬ä¸€ä¸ªæ­£å¼ç‰ˆæœ¬ï¼Œæ ‡å¿—ç€é¡¹ç›®ä»æµ‹è¯•ç‰ˆæœ¬è¿›å…¥ç”Ÿäº§å°±ç»ªçŠ¶æ€ã€‚

### Added - æ–°å¢åŠŸèƒ½

#### å®‰å…¨åŠ å›º ğŸ”’
- **API Token è®¤è¯**: å®ç° Bearer Token è®¤è¯æœºåˆ¶ï¼Œä¿æŠ¤æ‰€æœ‰ API ç«¯ç‚¹
  - æ”¯æŒç¯å¢ƒå˜é‡ `API_TOKEN` è‡ªå®šä¹‰è®¤è¯å¯†é’¥
  - æœªè®¾ç½®æ—¶è‡ªåŠ¨ç”Ÿæˆéšæœº Token å¹¶åœ¨æ—¥å¿—ä¸­æ˜¾ç¤º
  - `/health` å’Œ `/ws` ç«¯ç‚¹ä¸éœ€è¦è®¤è¯
  - æ‰€æœ‰ `/api/*` è·¯ç”±éœ€è¦è®¤è¯
- **æ•æ„Ÿä¿¡æ¯åŠ å¯†**: ä½¿ç”¨ Fernet å¯¹ç§°åŠ å¯†ä¿æŠ¤æ•æ„Ÿæ•°æ®
  - æ”¯æŒç¯å¢ƒå˜é‡ `ENCRYPTION_KEY` è‡ªå®šä¹‰åŠ å¯†å¯†é’¥
  - è‡ªåŠ¨ç”Ÿæˆå¹¶æŒä¹…åŒ–åŠ å¯†å¯†é’¥åˆ° `/data/.encryption_key`
  - API è¿”å›æ—¶æ•æ„Ÿå­—æ®µè‡ªåŠ¨è„±æ•
- **CORS æ”¶ç´§**: ä»…å…è®¸åŒåŸŸå’Œé…ç½®çš„å­åŸŸåè®¿é—®
  - æ”¯æŒç¯å¢ƒå˜é‡ `ALLOWED_ORIGINS` è‡ªå®šä¹‰å…è®¸çš„æ¥æº
  - é»˜è®¤ä»…å…è®¸ `ups-guard` å­åŸŸåå’Œæœ¬åœ°å¼€å‘ç¯å¢ƒ

#### æ€§èƒ½ä¼˜åŒ– ğŸ“ˆ
- **SQLite ä¼˜åŒ–**:
  - å¯ç”¨ WAL (Write-Ahead Logging) æ¨¡å¼ï¼Œæé«˜å¹¶å‘æ€§èƒ½
  - è®¾ç½® `PRAGMA synchronous=NORMAL` å‡å°‘ fsync å¼€é”€
  - æ·»åŠ æ•°æ®åº“å®Œæ•´æ€§æ£€æŸ¥
- **æ‰¹é‡äº‹åŠ¡æ”¯æŒ**: æ‰¹é‡å†™å…¥æ“ä½œä½¿ç”¨äº‹åŠ¡ï¼Œæé«˜æ•°æ®ä¸€è‡´æ€§

#### é”™è¯¯æ¢å¤ä¸å¥å£®æ€§ ğŸ›¡ï¸
- **gRPC è¿æ¥å¢å¼º**:
  - æ·»åŠ è¿æ¥è¶…æ—¶æœºåˆ¶ï¼ˆé»˜è®¤ 5 ç§’ï¼‰
  - å®ç°é‡è¯•é€»è¾‘ï¼ˆæœ€å¤š 3 æ¬¡ï¼ŒæŒ‡æ•°é€€é¿ï¼‰
  - å…³æœºå‰è¿›è¡Œ socket å¯è¾¾æ€§æ£€æŸ¥
  - è¯¦ç»†çš„é”™è¯¯æ—¥å¿—ï¼ˆåŒºåˆ†è¿æ¥å¤±è´¥ vs è°ƒç”¨å¤±è´¥ï¼‰
- **NUT è¿æ¥æ¢å¤**:
  - è‡ªåŠ¨é‡è¿æœºåˆ¶ï¼ˆæŒ‡æ•°é€€é¿ï¼Œæœ€å¤§ 60 ç§’é—´éš”ï¼‰
  - è¿æ¥çŠ¶æ€çº³å…¥å¥åº·æ£€æŸ¥ API
  - è®°å½•é‡è¿å°è¯•æ¬¡æ•°å’Œæœ€åé”™è¯¯

### Changed - åŠŸèƒ½å˜æ›´

- æ›´æ–°ä¾èµ–åŒ…åˆ°æœ€æ–°å®‰å…¨ç‰ˆæœ¬ï¼š
  - `cryptography>=46.0.5` (ä¿®å¤å¤šä¸ªå®‰å…¨æ¼æ´)
- å¥åº·æ£€æŸ¥ç«¯ç‚¹è¿”å›æ›´è¯¦ç»†çš„ä¿¡æ¯ï¼ˆåŒ…å« NUT è¿æ¥çŠ¶æ€ï¼‰

### Security - å®‰å…¨ä¿®å¤

- ä¿®å¤ CORS é…ç½®å…è®¸æ‰€æœ‰æ¥æºçš„å®‰å…¨éšæ‚£
- æ·»åŠ  API è®¤è¯ï¼Œé˜²æ­¢æœªæˆæƒè®¿é—®
- ä½¿ç”¨åŠ å¯†å­˜å‚¨æ•æ„Ÿé…ç½®ä¿¡æ¯
- æ›´æ–° cryptography åº“ä¿®å¤å·²çŸ¥æ¼æ´ï¼š
  - CVE-2024-XXXX: Bleichenbacher timing oracle attack
  - CVE-2024-YYYY: SSH certificates mishandling
  - CVE-2024-ZZZZ: Subgroup attack on SECT curves

---

## ç‰ˆæœ¬è¯´æ˜

- **[1.0.0]**: é¦–ä¸ªæ­£å¼ç‰ˆæœ¬ï¼Œç”Ÿäº§å°±ç»ªï¼ŒåŠŸèƒ½å®Œæ•´

## æ”¯æŒ

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·ï¼š
- æäº¤ [Issue](https://github.com/KingBoyAndGirl/ups-guard/issues)
- å‚ä¸ [Discussions](https://github.com/KingBoyAndGirl/ups-guard/discussions)

---

**Legend**
- ğŸ‰ Major release
- âœ¨ New feature
- ğŸ”’ Security
- ğŸ› Bug fix
- ğŸ“ˆ Performance
- ğŸ›¡ï¸ Robustness
- ğŸŒ i18n
- ğŸ”§ Configuration

# 推送通知配置指南

UPS Guard支持多种推送通知渠道，在关键事件（断电、低电量、关机等）发生时及时通知您。

## Server酱

Server酱是一个免费的微信推送服务，配置简单。

### 获取 SendKey

1. 访问 [Server酱官网](https://sct.ftqq.com/)
2. 使用微信扫码登录
3. 进入「SendKey」页面
4. 复制您的 SendKey（格式：`SCTxxxxx`）

### 配置步骤

1. 在 UPS Guard的「设置」页面找到「推送通知」区域
2. 点击「添加通知渠道」
3. 选择「Server酱」
4. 输入 SendKey
5. 点击「测试通知」确认配置正确
6. 保存设置

### 注意事项

- ✅ 免费版每天限制 5 条消息
- ✅ 付费版可发送更多消息
- ⚠️ SendKey 请勿泄露给他人

## PushPlus

PushPlus 是另一个微信推送服务，功能更丰富。

### 获取 Token

1. 访问 [PushPlus 官网](http://www.pushplus.plus/)
2. 使用微信扫码登录
3. 进入「发送消息」页面
4. 复制您的 Token

### 配置步骤

1. 在 UPS Guard的「设置」页面找到「推送通知」区域
2. 点击「添加通知渠道」
3. 选择「PushPlus」
4. 输入 Token
5. （可选）输入群组编码
6. 点击「测试通知」确认配置正确
7. 保存设置

### 群组推送

如果您创建了 PushPlus 群组，可以将通知发送到群组：

1. 在 PushPlus 网站创建群组
2. 复制群组编码
3. 在配置中填入群组编码
4. 群组成员都会收到通知

### 注意事项

- ✅ 免费版每天限制 200 条消息
- ✅ 支持群组推送
- ⚠️ Token 请勿泄露给他人

## 通知事件配置

您可以选择接收哪些事件的通知：

- 🔌 **断电** - UPS 切换到电池供电时
- ⚡ **恢复供电** - 市电恢复正常时
- 🔋 **低电量** - 电池电量低于阈值时
- 🔴 **关机** - 系统即将关机时
- ✅ **启动** - UPS Guard服务启动时
- 🔄 **取消关机** - 手动取消关机操作时

建议至少启用「断电」、「低电量」和「关机」通知。

## 通知内容示例

### 断电通知

```
标题：UPS 市电断电
内容：UPS 已切换到电池供电，当前电量：95%
```

### 低电量通知

```
标题：UPS 电池电量过低
内容：当前电量：18%，系统即将关机
```

### 关机通知

```
标题：系统即将关机
内容：UPS 电池供电已超过 5 分钟，系统将在 30 秒后关机。
```

## 测试通知

配置完成后，务必点击「测试通知」按钮确认配置正确。

测试通知示例：

```
标题：UPS Guard 测试通知
内容：这是一条测试消息，如果您收到此消息，说明通知配置正确。
```

如果未收到测试通知，请检查：

1. ✅ Token/SendKey 是否正确
2. ✅ 网络连接是否正常
3. ✅ 是否达到每日消息限额

## 多渠道配置

您可以配置多个通知渠道，实现冗余通知：

```
渠道1: Server酱 - 发送到个人微信
渠道2: PushPlus - 发送到家庭群组
```

所有启用的渠道都会同时收到通知。

## 开发自定义通知插件

如果您需要集成其他推送服务（如 Telegram、钉钉、企业微信等），可以开发自定义插件。

参见 [插件开发指南](./plugin-dev.md)。

## 常见问题

### Q: 为什么没有收到通知？

A: 请检查：
1. 通知渠道是否已启用
2. 事件类型是否已勾选
3. Token/SendKey 是否正确
4. 网络连接是否正常
5. 是否达到每日消息限额

### Q: 如何关闭某些通知？

A: 在设置页面取消勾选对应的事件类型即可。

### Q: 通知会延迟吗？

A: 正常情况下，通知会在事件发生后 1-5 秒内发送。网络延迟可能会影响接收时间。

### Q: 支持其他推送服务吗？

A: 目前原生支持 Server酱 和 PushPlus。其他服务可通过插件扩展。欢迎贡献插件！
